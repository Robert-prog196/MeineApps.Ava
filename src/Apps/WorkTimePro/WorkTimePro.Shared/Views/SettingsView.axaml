<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:WorkTimePro.ViewModels"
             xmlns:mi="using:Material.Icons.Avalonia"
             xmlns:loc="using:MeineApps.Core.Ava.Localization"
             xmlns:conv="using:WorkTimePro.Converters"
             x:Class="WorkTimePro.Views.SettingsView"
             x:DataType="vm:SettingsViewModel">

  <UserControl.Resources>
    <conv:RoundingDisplayConverter x:Key="RoundingDisplayConverter" />
  </UserControl.Resources>

  <ScrollViewer VerticalScrollBarVisibility="Auto" AutomationProperties.AutomationId="Settings_ScrollViewer">
    <StackPanel Spacing="12" Margin="16" AutomationProperties.AutomationId="Settings_RootPanel">

      <!-- Header -->
      <TextBlock AutomationProperties.AutomationId="Settings_TxtTitle"
                 Text="{loc:Translate Settings}"
                 FontSize="22" FontWeight="Bold"
                 Foreground="{DynamicResource TextPrimaryBrush}"
                 Margin="0,4,0,4" />

      <!-- ==================== Premium Status ==================== -->
      <Border Classes="SettingsCard PremiumShimmer" AutomationProperties.AutomationId="Settings_PremiumCard">
        <StackPanel Spacing="12">
          <StackPanel Orientation="Horizontal" Spacing="8">
            <mi:MaterialIcon Kind="Crown" Width="24" Height="24"
                             Foreground="#FFD700" />
            <TextBlock Text="{loc:Translate PremiumStatus}"
                       FontSize="16" FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
          </StackPanel>

          <!-- Status Badge -->
          <Border AutomationProperties.AutomationId="Settings_PremiumBadge"
                  Background="{Binding PremiumStatusColor}"
                  CornerRadius="12" Padding="16,8"
                  HorizontalAlignment="Center">
            <TextBlock AutomationProperties.AutomationId="Settings_TxtPremiumStatus" Text="{Binding PremiumStatusText}"
                       FontSize="15" FontWeight="Bold"
                       Foreground="White" />
          </Border>

          <!-- Trial Progress -->
          <StackPanel Spacing="4" IsVisible="{Binding IsInTrial}" AutomationProperties.AutomationId="Settings_TrialProgress">
            <TextBlock AutomationProperties.AutomationId="Settings_TxtTrialProgress" Text="{Binding TrialProgressText}"
                       FontSize="12"
                       Foreground="{DynamicResource TextSecondaryBrush}" />
            <ProgressBar AutomationProperties.AutomationId="Settings_PbTrialProgress" Value="{Binding TrialProgress}"
                         Maximum="1"
                         Foreground="{DynamicResource WarningBrush}"
                         Height="8" />
          </StackPanel>

          <Button AutomationProperties.AutomationId="Settings_BtnBuyPremium"
                  Content="{Binding BuyPremiumButtonText}"
                  Classes="Primary"
                  Command="{Binding PurchasePremiumCommand}"
                  IsVisible="{Binding !IsPremium}"
                  HorizontalAlignment="Stretch"
                  HorizontalContentAlignment="Center" />

          <Button AutomationProperties.AutomationId="Settings_BtnRestorePurchases"
                  Content="{loc:Translate RestorePurchases}"
                  Classes="Secondary"
                  Command="{Binding RestorePurchasesCommand}"
                  IsVisible="{Binding !IsPremium}"
                  FontSize="12"
                  HorizontalAlignment="Stretch"
                  HorizontalContentAlignment="Center" />
        </StackPanel>
      </Border>

      <!-- ==================== Work Time Settings ==================== -->
      <Border Classes="SettingsCard" AutomationProperties.AutomationId="Settings_WorkTimeCard">
        <StackPanel Spacing="12">
          <StackPanel Orientation="Horizontal" Spacing="8">
            <mi:MaterialIcon Kind="ClockOutline" Width="20" Height="20"
                             Foreground="{DynamicResource PrimaryBrush}" />
            <TextBlock Text="{loc:Translate WorkTimeSettings}"
                       FontSize="16" FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
          </StackPanel>

          <!-- Daily Hours -->
          <Grid ColumnDefinitions="*,120">
            <TextBlock AutomationProperties.AutomationId="Settings_TxtDailyTarget"
                       Text="{loc:Translate DailyTarget}"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
            <TextBox Grid.Column="1"
                     AutomationProperties.AutomationId="Settings_TbDailyHours"
                     Text="{Binding DailyHours}"
                     HorizontalContentAlignment="Center" />
          </Grid>

          <!-- Weekly Hours -->
          <Grid ColumnDefinitions="*,120">
            <TextBlock AutomationProperties.AutomationId="Settings_TxtWeeklyTarget"
                       Text="{loc:Translate WeeklyTarget}"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
            <TextBox Grid.Column="1"
                     AutomationProperties.AutomationId="Settings_TbWeeklyHours"
                     Text="{Binding WeeklyHours}"
                     HorizontalContentAlignment="Center" />
          </Grid>

          <Separator />

          <!-- Work Days -->
          <TextBlock Text="{loc:Translate WorkDays}"
                     FontSize="12"
                     Foreground="{DynamicResource TextSecondaryBrush}"
                     Margin="0,4,0,0" />

          <WrapPanel Orientation="Horizontal">
            <StackPanel Orientation="Horizontal" Margin="0,0,16,8">
              <CheckBox AutomationProperties.AutomationId="Settings_ChkMonday" IsChecked="{Binding MondayEnabled}" />
              <TextBlock Text="{loc:Translate Monday}" FontSize="13"
                         Foreground="{DynamicResource TextPrimaryBrush}"
                         VerticalAlignment="Center" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,0,16,8">
              <CheckBox AutomationProperties.AutomationId="Settings_ChkTuesday" IsChecked="{Binding TuesdayEnabled}" />
              <TextBlock Text="{loc:Translate Tuesday}" FontSize="13"
                         Foreground="{DynamicResource TextPrimaryBrush}"
                         VerticalAlignment="Center" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,0,16,8">
              <CheckBox AutomationProperties.AutomationId="Settings_ChkWednesday" IsChecked="{Binding WednesdayEnabled}" />
              <TextBlock Text="{loc:Translate Wednesday}" FontSize="13"
                         Foreground="{DynamicResource TextPrimaryBrush}"
                         VerticalAlignment="Center" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,0,16,8">
              <CheckBox AutomationProperties.AutomationId="Settings_ChkThursday" IsChecked="{Binding ThursdayEnabled}" />
              <TextBlock Text="{loc:Translate Thursday}" FontSize="13"
                         Foreground="{DynamicResource TextPrimaryBrush}"
                         VerticalAlignment="Center" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,0,16,8">
              <CheckBox AutomationProperties.AutomationId="Settings_ChkFriday" IsChecked="{Binding FridayEnabled}" />
              <TextBlock Text="{loc:Translate Friday}" FontSize="13"
                         Foreground="{DynamicResource TextPrimaryBrush}"
                         VerticalAlignment="Center" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,0,16,8">
              <CheckBox AutomationProperties.AutomationId="Settings_ChkSaturday" IsChecked="{Binding SaturdayEnabled}" />
              <TextBlock Text="{loc:Translate Saturday}" FontSize="13"
                         Foreground="{DynamicResource TextSecondaryBrush}"
                         VerticalAlignment="Center" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,0,16,8">
              <CheckBox AutomationProperties.AutomationId="Settings_ChkSunday" IsChecked="{Binding SundayEnabled}" />
              <TextBlock Text="{loc:Translate Sunday}" FontSize="13"
                         Foreground="{DynamicResource TextSecondaryBrush}"
                         VerticalAlignment="Center" />
            </StackPanel>
          </WrapPanel>

          <Separator />

          <!-- Individual Hours per Day -->
          <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,4,0,0">
            <ToggleSwitch AutomationProperties.AutomationId="Settings_TsIndividualHours" IsChecked="{Binding UseIndividualHours}" OnContent="" OffContent="" />
            <TextBlock Text="{loc:Translate IndividualHoursPerDay}"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
          </StackPanel>

          <StackPanel Spacing="8" IsVisible="{Binding UseIndividualHours}">
            <Grid ColumnDefinitions="60,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto"
                  ColumnSpacing="8" RowSpacing="4">
              <TextBlock Grid.Row="0" Text="{loc:Translate Monday}" FontSize="13" VerticalAlignment="Center"
                         Foreground="{DynamicResource TextPrimaryBrush}" />
              <TextBox Grid.Row="0" Grid.Column="1" AutomationProperties.AutomationId="Settings_TbMondayHours" Text="{Binding MondayHours}" />

              <TextBlock Grid.Row="1" Text="{loc:Translate Tuesday}" FontSize="13" VerticalAlignment="Center"
                         Foreground="{DynamicResource TextPrimaryBrush}" />
              <TextBox Grid.Row="1" Grid.Column="1" AutomationProperties.AutomationId="Settings_TbTuesdayHours" Text="{Binding TuesdayHours}" />

              <TextBlock Grid.Row="2" Text="{loc:Translate Wednesday}" FontSize="13" VerticalAlignment="Center"
                         Foreground="{DynamicResource TextPrimaryBrush}" />
              <TextBox Grid.Row="2" Grid.Column="1" AutomationProperties.AutomationId="Settings_TbWednesdayHours" Text="{Binding WednesdayHours}" />

              <TextBlock Grid.Row="3" Text="{loc:Translate Thursday}" FontSize="13" VerticalAlignment="Center"
                         Foreground="{DynamicResource TextPrimaryBrush}" />
              <TextBox Grid.Row="3" Grid.Column="1" AutomationProperties.AutomationId="Settings_TbThursdayHours" Text="{Binding ThursdayHours}" />

              <TextBlock Grid.Row="4" Text="{loc:Translate Friday}" FontSize="13" VerticalAlignment="Center"
                         Foreground="{DynamicResource TextPrimaryBrush}" />
              <TextBox Grid.Row="4" Grid.Column="1" AutomationProperties.AutomationId="Settings_TbFridayHours" Text="{Binding FridayHours}" />

              <TextBlock Grid.Row="5" Text="{loc:Translate Saturday}" FontSize="13" VerticalAlignment="Center"
                         Foreground="{DynamicResource TextSecondaryBrush}" />
              <TextBox Grid.Row="5" Grid.Column="1" AutomationProperties.AutomationId="Settings_TbSaturdayHours" Text="{Binding SaturdayHours}" />

              <TextBlock Grid.Row="6" Text="{loc:Translate Sunday}" FontSize="13" VerticalAlignment="Center"
                         Foreground="{DynamicResource TextSecondaryBrush}" />
              <TextBox Grid.Row="6" Grid.Column="1" AutomationProperties.AutomationId="Settings_TbSundayHours" Text="{Binding SundayHours}" />
            </Grid>
          </StackPanel>

          <Separator />

          <!-- Zeitrundung -->
          <Grid ColumnDefinitions="*,140">
            <TextBlock Text="{loc:Translate TimeRounding}"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
            <ComboBox Grid.Column="1"
                      AutomationProperties.AutomationId="Settings_CmbRounding"
                      ItemsSource="{Binding RoundingOptions}"
                      SelectedItem="{Binding RoundingMinutes}"
                      HorizontalAlignment="Stretch">
              <ComboBox.ItemTemplate>
                <DataTemplate>
                  <TextBlock Text="{Binding Converter={StaticResource RoundingDisplayConverter}}" />
                </DataTemplate>
              </ComboBox.ItemTemplate>
            </ComboBox>
          </Grid>

          <!-- Stundenlohn -->
          <Grid ColumnDefinitions="*,120">
            <TextBlock Text="{loc:Translate HourlyRate}"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
            <NumericUpDown Grid.Column="1"
                           AutomationProperties.AutomationId="Settings_NudHourlyRate"
                           Value="{Binding HourlyRate}"
                           Minimum="0"
                           Maximum="10000"
                           Increment="0.50"
                           FormatString="0.00"
                           HorizontalContentAlignment="Center" />
          </Grid>
        </StackPanel>
      </Border>

      <!-- ==================== Auto-Pause ==================== -->
      <Border Classes="SettingsCard" AutomationProperties.AutomationId="Settings_AutoPauseCard">
        <StackPanel Spacing="12">
          <Grid ColumnDefinitions="Auto,*,Auto">
            <mi:MaterialIcon Kind="Coffee" Width="20" Height="20"
                             Foreground="{DynamicResource PrimaryBrush}" />
            <TextBlock Grid.Column="1"
                       Text="{loc:Translate AutoPause}"
                       FontSize="16" FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center"
                       Margin="8,0,0,0" />
            <ToggleSwitch Grid.Column="2"
                          AutomationProperties.AutomationId="Settings_TsAutoPause"
                          IsChecked="{Binding AutoPauseEnabled}"
                          OnContent="" OffContent="" />
          </Grid>

          <TextBlock Text="{loc:Translate AutoPauseDescription}"
                     FontSize="12"
                     Foreground="{DynamicResource TextSecondaryBrush}" />

          <Grid ColumnDefinitions="*,100" IsVisible="{Binding AutoPauseEnabled}">
            <TextBlock Text="{loc:Translate AutoPauseAfterHours}"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
            <TextBox Grid.Column="1"
                     AutomationProperties.AutomationId="Settings_TbAutoPauseAfterHours"
                     Text="{Binding AutoPauseAfterHours}"
                     HorizontalContentAlignment="Center" />
          </Grid>

          <Grid ColumnDefinitions="*,100" IsVisible="{Binding AutoPauseEnabled}">
            <TextBlock Text="{loc:Translate PauseMinutes}"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
            <TextBox Grid.Column="1"
                     AutomationProperties.AutomationId="Settings_TbAutoPauseMinutes"
                     Text="{Binding AutoPauseMinutes}"
                     HorizontalContentAlignment="Center" />
          </Grid>
        </StackPanel>
      </Border>

      <!-- ==================== Reminders ==================== -->
      <Border Classes="SettingsCard" AutomationProperties.AutomationId="Settings_RemindersCard">
        <StackPanel Spacing="12">
          <StackPanel Orientation="Horizontal" Spacing="8">
            <mi:MaterialIcon Kind="Bell" Width="20" Height="20"
                             Foreground="{DynamicResource PrimaryBrush}" />
            <TextBlock Text="{loc:Translate Reminders}"
                       FontSize="16" FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
          </StackPanel>

          <!-- Morning -->
          <Grid ColumnDefinitions="Auto,*,Auto">
            <ToggleSwitch AutomationProperties.AutomationId="Settings_TsMorningReminder" IsChecked="{Binding MorningReminderEnabled}" OnContent="" OffContent="" />
            <TextBlock Grid.Column="1"
                       Text="{loc:Translate MorningReminder}"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
            <TimePicker Grid.Column="2"
                       AutomationProperties.AutomationId="Settings_TpMorningReminder"
                       SelectedTime="{Binding MorningReminderTime}"
                       IsEnabled="{Binding MorningReminderEnabled}"
                       ClockIdentifier="24HourClock"
                       MinuteIncrement="5" />
          </Grid>

          <!-- Evening -->
          <Grid ColumnDefinitions="Auto,*,Auto">
            <ToggleSwitch AutomationProperties.AutomationId="Settings_TsEveningReminder" IsChecked="{Binding EveningReminderEnabled}" OnContent="" OffContent="" />
            <TextBlock Grid.Column="1"
                       Text="{loc:Translate EveningReminder}"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
            <TimePicker Grid.Column="2"
                       AutomationProperties.AutomationId="Settings_TpEveningReminder"
                       SelectedTime="{Binding EveningReminderTime}"
                       IsEnabled="{Binding EveningReminderEnabled}"
                       ClockIdentifier="24HourClock"
                       MinuteIncrement="5" />
          </Grid>

          <!-- Break -->
          <StackPanel Orientation="Horizontal" Spacing="8">
            <ToggleSwitch AutomationProperties.AutomationId="Settings_TsPauseReminder" IsChecked="{Binding PauseReminderEnabled}" OnContent="" OffContent="" />
            <TextBlock Text="{loc:Translate BreakReminder}"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
          </StackPanel>
        </StackPanel>
      </Border>

      <!-- ==================== Vacation ==================== -->
      <Border Classes="SettingsCard" AutomationProperties.AutomationId="Settings_VacationCard">
        <StackPanel Spacing="12">
          <StackPanel Orientation="Horizontal" Spacing="8">
            <mi:MaterialIcon Kind="Beach" Width="20" Height="20"
                             Foreground="{DynamicResource PrimaryBrush}" />
            <TextBlock Text="{loc:Translate Vacation}"
                       FontSize="16" FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
          </StackPanel>

          <Grid ColumnDefinitions="*,100">
            <TextBlock Text="{loc:Translate VacationDaysPerYear}"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
            <TextBox Grid.Column="1"
                     AutomationProperties.AutomationId="Settings_TbVacationDays"
                     Text="{Binding VacationDaysPerYear}"
                     HorizontalContentAlignment="Center" />
          </Grid>

          <TextBlock Text="{loc:Translate VacationDefault}"
                     FontSize="12"
                     Foreground="{DynamicResource TextSecondaryBrush}" />
        </StackPanel>
      </Border>

      <!-- ==================== Holidays ==================== -->
      <Border Classes="SettingsCard" AutomationProperties.AutomationId="Settings_HolidaysCard">
        <StackPanel Spacing="12">
          <StackPanel Orientation="Horizontal" Spacing="8">
            <mi:MaterialIcon Kind="PartyPopper" Width="20" Height="20"
                             Foreground="{DynamicResource PrimaryBrush}" />
            <TextBlock Text="{loc:Translate Holidays}"
                       FontSize="16" FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
          </StackPanel>

          <TextBlock Text="{loc:Translate Region}"
                     FontSize="12"
                     Foreground="{DynamicResource TextSecondaryBrush}" />

          <ComboBox AutomationProperties.AutomationId="Settings_CmbRegion"
                    ItemsSource="{Binding GermanRegions}"
                    SelectedIndex="{Binding SelectedRegionIndex}"
                    HorizontalAlignment="Stretch" />
        </StackPanel>
      </Border>

      <!-- ==================== Legal Compliance ==================== -->
      <Border Classes="SettingsCard" AutomationProperties.AutomationId="Settings_LegalComplianceCard">
        <StackPanel Spacing="8">
          <Grid ColumnDefinitions="Auto,*,Auto">
            <mi:MaterialIcon Kind="Shield" Width="20" Height="20"
                             Foreground="{DynamicResource PrimaryBrush}" />
            <TextBlock Grid.Column="1"
                       Text="{loc:Translate LegalCompliance}"
                       FontSize="16" FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center"
                       Margin="8,0,0,0" />
            <ToggleSwitch Grid.Column="2"
                          AutomationProperties.AutomationId="Settings_TsLegalCompliance"
                          IsChecked="{Binding LegalComplianceEnabled}"
                          OnContent="" OffContent="" />
          </Grid>

          <TextBlock Text="{loc:Translate LegalComplianceDescription}"
                     FontSize="12"
                     Foreground="{DynamicResource TextSecondaryBrush}" />
        </StackPanel>
      </Border>

      <!-- ==================== Overtime Warning ==================== -->
      <Border Classes="SettingsCard" AutomationProperties.AutomationId="Settings_OvertimeCard">
        <StackPanel Spacing="12">
          <Grid ColumnDefinitions="Auto,*,Auto">
            <mi:MaterialIcon Kind="TrendingUp" Width="20" Height="20"
                             Foreground="{DynamicResource PrimaryBrush}" />
            <TextBlock Grid.Column="1"
                       Text="{loc:Translate OvertimeWarning}"
                       FontSize="16" FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center"
                       Margin="8,0,0,0" />
            <ToggleSwitch Grid.Column="2"
                          AutomationProperties.AutomationId="Settings_TsOvertimeWarning"
                          IsChecked="{Binding OvertimeWarningEnabled}"
                          OnContent="" OffContent="" />
          </Grid>

          <Grid ColumnDefinitions="*,100" IsVisible="{Binding OvertimeWarningEnabled}">
            <TextBlock Text="{loc:Translate OvertimeWarningHours}"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
            <TextBox Grid.Column="1"
                     AutomationProperties.AutomationId="Settings_TbOvertimeHours"
                     Text="{Binding OvertimeWarningHours}"
                     HorizontalContentAlignment="Center" />
          </Grid>
        </StackPanel>
      </Border>

      <!-- ==================== Theme Selection ==================== -->
      <Border Classes="SettingsCard" AutomationProperties.AutomationId="Settings_ThemeCard">
        <StackPanel Spacing="12">
          <StackPanel Orientation="Horizontal" Spacing="8">
            <mi:MaterialIcon Kind="Palette" Width="20" Height="20"
                             Foreground="{DynamicResource PrimaryBrush}" />
            <TextBlock Text="{loc:Translate Theme}"
                       FontSize="16" FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
          </StackPanel>

          <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto"
                ColumnSpacing="8" RowSpacing="8">

            <!-- Theme 1: Midnight -->
            <Panel Grid.Row="0" Grid.Column="0">
              <Button AutomationProperties.AutomationId="Settings_BtnThemeMidnightActive"
                      IsVisible="{Binding IsMidnightSelected}"
                      Command="{Binding SelectThemeCommand}"
                      CommandParameter="Midnight"
                      HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch"
                      Height="NaN" Padding="0" CornerRadius="10"
                      Background="Transparent" BorderThickness="0">
                <Border CornerRadius="10" Padding="12" Background="#1E293B"
                        BorderThickness="2" BorderBrush="#6366F1">
                  <Grid>
                    <mi:MaterialIcon Kind="CheckCircle" Width="18" Height="18"
                                     Foreground="#6366F1"
                                     HorizontalAlignment="Right" VerticalAlignment="Top"
                                     Margin="0,-2,-2,0" />
                    <StackPanel Spacing="6">
                      <StackPanel Orientation="Horizontal" Spacing="6" HorizontalAlignment="Center">
                        <Ellipse Width="20" Height="20" Fill="#6366F1" />
                        <Ellipse Width="20" Height="20" Fill="#0F172A" StrokeThickness="1" Stroke="#334155" />
                        <Ellipse Width="20" Height="20" Fill="#22D3EE" />
                      </StackPanel>
                      <TextBlock Text="{Binding ThemeMidnightName}" HorizontalAlignment="Center"
                                 FontWeight="Medium" FontSize="13" Foreground="#E2E8F0" />
                      <TextBlock Text="{Binding ThemeMidnightDescText}" HorizontalAlignment="Center"
                                 FontSize="11" Foreground="#94A3B8" />
                    </StackPanel>
                  </Grid>
                </Border>
              </Button>
              <Button AutomationProperties.AutomationId="Settings_BtnThemeMidnight"
                      IsVisible="{Binding !IsMidnightSelected}"
                      Command="{Binding SelectThemeCommand}"
                      CommandParameter="Midnight"
                      HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch"
                      Height="NaN" Padding="0" CornerRadius="10"
                      Background="Transparent" BorderThickness="0">
                <Border CornerRadius="10" Padding="12" Background="#1E293B"
                        BorderThickness="2" BorderBrush="#334155">
                  <StackPanel Spacing="6">
                    <StackPanel Orientation="Horizontal" Spacing="6" HorizontalAlignment="Center">
                      <Ellipse Width="20" Height="20" Fill="#6366F1" />
                      <Ellipse Width="20" Height="20" Fill="#0F172A" StrokeThickness="1" Stroke="#334155" />
                      <Ellipse Width="20" Height="20" Fill="#22D3EE" />
                    </StackPanel>
                    <TextBlock Text="{Binding ThemeMidnightName}" HorizontalAlignment="Center"
                               FontWeight="Medium" FontSize="13" Foreground="#E2E8F0" />
                    <TextBlock Text="{Binding ThemeMidnightDescText}" HorizontalAlignment="Center"
                               FontSize="11" Foreground="#94A3B8" />
                  </StackPanel>
                </Border>
              </Button>
            </Panel>

            <!-- Theme 2: Aurora -->
            <Panel Grid.Row="0" Grid.Column="1">
              <Button AutomationProperties.AutomationId="Settings_BtnThemeAuroraActive"
                      IsVisible="{Binding IsAuroraSelected}"
                      Command="{Binding SelectThemeCommand}"
                      CommandParameter="Aurora"
                      HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch"
                      Height="NaN" Padding="0" CornerRadius="10"
                      Background="Transparent" BorderThickness="0">
                <Border CornerRadius="10" Padding="12" Background="#18181B"
                        BorderThickness="2" BorderBrush="#EC4899">
                  <Grid>
                    <mi:MaterialIcon Kind="CheckCircle" Width="18" Height="18"
                                     Foreground="#EC4899"
                                     HorizontalAlignment="Right" VerticalAlignment="Top"
                                     Margin="0,-2,-2,0" />
                    <StackPanel Spacing="6">
                      <StackPanel Orientation="Horizontal" Spacing="6" HorizontalAlignment="Center">
                        <Ellipse Width="20" Height="20" Fill="#EC4899" />
                        <Ellipse Width="20" Height="20" Fill="#18181B" StrokeThickness="1" Stroke="#3F3F46" />
                        <Ellipse Width="20" Height="20" Fill="#06B6D4" />
                      </StackPanel>
                      <TextBlock Text="{Binding ThemeAuroraName}" HorizontalAlignment="Center"
                                 FontWeight="Medium" FontSize="13" Foreground="#E4E4E7" />
                      <TextBlock Text="{Binding ThemeAuroraDescText}" HorizontalAlignment="Center"
                                 FontSize="11" Foreground="#A1A1AA" />
                    </StackPanel>
                  </Grid>
                </Border>
              </Button>
              <Button AutomationProperties.AutomationId="Settings_BtnThemeAurora"
                      IsVisible="{Binding !IsAuroraSelected}"
                      Command="{Binding SelectThemeCommand}"
                      CommandParameter="Aurora"
                      HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch"
                      Height="NaN" Padding="0" CornerRadius="10"
                      Background="Transparent" BorderThickness="0">
                <Border CornerRadius="10" Padding="12" Background="#18181B"
                        BorderThickness="2" BorderBrush="#3F3F46">
                  <StackPanel Spacing="6">
                    <StackPanel Orientation="Horizontal" Spacing="6" HorizontalAlignment="Center">
                      <Ellipse Width="20" Height="20" Fill="#EC4899" />
                      <Ellipse Width="20" Height="20" Fill="#18181B" StrokeThickness="1" Stroke="#3F3F46" />
                      <Ellipse Width="20" Height="20" Fill="#06B6D4" />
                    </StackPanel>
                    <TextBlock Text="{Binding ThemeAuroraName}" HorizontalAlignment="Center"
                               FontWeight="Medium" FontSize="13" Foreground="#E4E4E7" />
                    <TextBlock Text="{Binding ThemeAuroraDescText}" HorizontalAlignment="Center"
                               FontSize="11" Foreground="#A1A1AA" />
                  </StackPanel>
                </Border>
              </Button>
            </Panel>

            <!-- Theme 3: Daylight -->
            <Panel Grid.Row="1" Grid.Column="0">
              <Button AutomationProperties.AutomationId="Settings_BtnThemeDaylightActive"
                      IsVisible="{Binding IsDaylightSelected}"
                      Command="{Binding SelectThemeCommand}"
                      CommandParameter="Daylight"
                      HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch"
                      Height="NaN" Padding="0" CornerRadius="10"
                      Background="Transparent" BorderThickness="0">
                <Border CornerRadius="10" Padding="12" Background="#E2E8F0"
                        BorderThickness="2" BorderBrush="#2563EB">
                  <Grid>
                    <mi:MaterialIcon Kind="CheckCircle" Width="18" Height="18"
                                     Foreground="#2563EB"
                                     HorizontalAlignment="Right" VerticalAlignment="Top"
                                     Margin="0,-2,-2,0" />
                    <StackPanel Spacing="6">
                      <StackPanel Orientation="Horizontal" Spacing="6" HorizontalAlignment="Center">
                        <Ellipse Width="20" Height="20" Fill="#2563EB" />
                        <Ellipse Width="20" Height="20" Fill="#F8FAFC" StrokeThickness="1" Stroke="#CBD5E1" />
                        <Ellipse Width="20" Height="20" Fill="#0EA5E9" />
                      </StackPanel>
                      <TextBlock Text="{Binding ThemeDaylightName}" HorizontalAlignment="Center"
                                 FontWeight="Medium" FontSize="13" Foreground="#1E293B" />
                      <TextBlock Text="{Binding ThemeDaylightDescText}" HorizontalAlignment="Center"
                                 FontSize="11" Foreground="#64748B" />
                    </StackPanel>
                  </Grid>
                </Border>
              </Button>
              <Button AutomationProperties.AutomationId="Settings_BtnThemeDaylight"
                      IsVisible="{Binding !IsDaylightSelected}"
                      Command="{Binding SelectThemeCommand}"
                      CommandParameter="Daylight"
                      HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch"
                      Height="NaN" Padding="0" CornerRadius="10"
                      Background="Transparent" BorderThickness="0">
                <Border CornerRadius="10" Padding="12" Background="#E2E8F0"
                        BorderThickness="2" BorderBrush="#CBD5E1">
                  <StackPanel Spacing="6">
                    <StackPanel Orientation="Horizontal" Spacing="6" HorizontalAlignment="Center">
                      <Ellipse Width="20" Height="20" Fill="#2563EB" />
                      <Ellipse Width="20" Height="20" Fill="#F8FAFC" StrokeThickness="1" Stroke="#CBD5E1" />
                      <Ellipse Width="20" Height="20" Fill="#0EA5E9" />
                    </StackPanel>
                    <TextBlock Text="{Binding ThemeDaylightName}" HorizontalAlignment="Center"
                               FontWeight="Medium" FontSize="13" Foreground="#1E293B" />
                    <TextBlock Text="{Binding ThemeDaylightDescText}" HorizontalAlignment="Center"
                               FontSize="11" Foreground="#64748B" />
                  </StackPanel>
                </Border>
              </Button>
            </Panel>

            <!-- Theme 4: Forest -->
            <Panel Grid.Row="1" Grid.Column="1">
              <Button AutomationProperties.AutomationId="Settings_BtnThemeForestActive"
                      IsVisible="{Binding IsForestSelected}"
                      Command="{Binding SelectThemeCommand}"
                      CommandParameter="Forest"
                      HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch"
                      Height="NaN" Padding="0" CornerRadius="10"
                      Background="Transparent" BorderThickness="0">
                <Border CornerRadius="10" Padding="12" Background="#022C22"
                        BorderThickness="2" BorderBrush="#10B981">
                  <Grid>
                    <mi:MaterialIcon Kind="CheckCircle" Width="18" Height="18"
                                     Foreground="#10B981"
                                     HorizontalAlignment="Right" VerticalAlignment="Top"
                                     Margin="0,-2,-2,0" />
                    <StackPanel Spacing="6">
                      <StackPanel Orientation="Horizontal" Spacing="6" HorizontalAlignment="Center">
                        <Ellipse Width="20" Height="20" Fill="#10B981" />
                        <Ellipse Width="20" Height="20" Fill="#022C22" StrokeThickness="1" Stroke="#065F46" />
                        <Ellipse Width="20" Height="20" Fill="#34D399" />
                      </StackPanel>
                      <TextBlock Text="{Binding ThemeForestName}" HorizontalAlignment="Center"
                                 FontWeight="Medium" FontSize="13" Foreground="#D1FAE5" />
                      <TextBlock Text="{Binding ThemeForestDescText}" HorizontalAlignment="Center"
                                 FontSize="11" Foreground="#6EE7B7" />
                    </StackPanel>
                  </Grid>
                </Border>
              </Button>
              <Button AutomationProperties.AutomationId="Settings_BtnThemeForest"
                      IsVisible="{Binding !IsForestSelected}"
                      Command="{Binding SelectThemeCommand}"
                      CommandParameter="Forest"
                      HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch"
                      Height="NaN" Padding="0" CornerRadius="10"
                      Background="Transparent" BorderThickness="0">
                <Border CornerRadius="10" Padding="12" Background="#022C22"
                        BorderThickness="2" BorderBrush="#065F46">
                  <StackPanel Spacing="6">
                    <StackPanel Orientation="Horizontal" Spacing="6" HorizontalAlignment="Center">
                      <Ellipse Width="20" Height="20" Fill="#10B981" />
                      <Ellipse Width="20" Height="20" Fill="#022C22" StrokeThickness="1" Stroke="#065F46" />
                      <Ellipse Width="20" Height="20" Fill="#34D399" />
                    </StackPanel>
                    <TextBlock Text="{Binding ThemeForestName}" HorizontalAlignment="Center"
                               FontWeight="Medium" FontSize="13" Foreground="#D1FAE5" />
                    <TextBlock Text="{Binding ThemeForestDescText}" HorizontalAlignment="Center"
                               FontSize="11" Foreground="#6EE7B7" />
                  </StackPanel>
                </Border>
              </Button>
            </Panel>

          </Grid>
        </StackPanel>
      </Border>

      <!-- ==================== Language Selection ==================== -->
      <Border Classes="SettingsCard" AutomationProperties.AutomationId="Settings_LanguageCard">
        <StackPanel Spacing="12">
          <StackPanel Orientation="Horizontal" Spacing="8">
            <mi:MaterialIcon Kind="Translate" Width="20" Height="20"
                             Foreground="{DynamicResource PrimaryBrush}" />
            <TextBlock Text="{loc:Translate Language}"
                       FontSize="16" FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
          </StackPanel>

          <WrapPanel Orientation="Horizontal">
            <Panel>
              <Button AutomationProperties.AutomationId="Settings_BtnLangDeActive" Classes="Primary Small" Content="Deutsch"
                      IsVisible="{Binding IsGermanSelected}"
                      Command="{Binding SelectLanguageCommand}" CommandParameter="de"
                      Margin="0,0,8,8" />
              <Button AutomationProperties.AutomationId="Settings_BtnLangDe" Classes="Outlined Small" Content="Deutsch"
                      IsVisible="{Binding !IsGermanSelected}"
                      Command="{Binding SelectLanguageCommand}" CommandParameter="de"
                      Margin="0,0,8,8" />
            </Panel>
            <Panel>
              <Button AutomationProperties.AutomationId="Settings_BtnLangEnActive" Classes="Primary Small" Content="English"
                      IsVisible="{Binding IsEnglishSelected}"
                      Command="{Binding SelectLanguageCommand}" CommandParameter="en"
                      Margin="0,0,8,8" />
              <Button AutomationProperties.AutomationId="Settings_BtnLangEn" Classes="Outlined Small" Content="English"
                      IsVisible="{Binding !IsEnglishSelected}"
                      Command="{Binding SelectLanguageCommand}" CommandParameter="en"
                      Margin="0,0,8,8" />
            </Panel>
            <Panel>
              <Button AutomationProperties.AutomationId="Settings_BtnLangEsActive" Classes="Primary Small" Content="Espa&#241;ol"
                      IsVisible="{Binding IsSpanishSelected}"
                      Command="{Binding SelectLanguageCommand}" CommandParameter="es"
                      Margin="0,0,8,8" />
              <Button AutomationProperties.AutomationId="Settings_BtnLangEs" Classes="Outlined Small" Content="Espa&#241;ol"
                      IsVisible="{Binding !IsSpanishSelected}"
                      Command="{Binding SelectLanguageCommand}" CommandParameter="es"
                      Margin="0,0,8,8" />
            </Panel>
            <Panel>
              <Button AutomationProperties.AutomationId="Settings_BtnLangFrActive" Classes="Primary Small" Content="Fran&#231;ais"
                      IsVisible="{Binding IsFrenchSelected}"
                      Command="{Binding SelectLanguageCommand}" CommandParameter="fr"
                      Margin="0,0,8,8" />
              <Button AutomationProperties.AutomationId="Settings_BtnLangFr" Classes="Outlined Small" Content="Fran&#231;ais"
                      IsVisible="{Binding !IsFrenchSelected}"
                      Command="{Binding SelectLanguageCommand}" CommandParameter="fr"
                      Margin="0,0,8,8" />
            </Panel>
            <Panel>
              <Button AutomationProperties.AutomationId="Settings_BtnLangItActive" Classes="Primary Small" Content="Italiano"
                      IsVisible="{Binding IsItalianSelected}"
                      Command="{Binding SelectLanguageCommand}" CommandParameter="it"
                      Margin="0,0,8,8" />
              <Button AutomationProperties.AutomationId="Settings_BtnLangIt" Classes="Outlined Small" Content="Italiano"
                      IsVisible="{Binding !IsItalianSelected}"
                      Command="{Binding SelectLanguageCommand}" CommandParameter="it"
                      Margin="0,0,8,8" />
            </Panel>
            <Panel>
              <Button AutomationProperties.AutomationId="Settings_BtnLangPtActive" Classes="Primary Small" Content="Portugu&#234;s"
                      IsVisible="{Binding IsPortugueseSelected}"
                      Command="{Binding SelectLanguageCommand}" CommandParameter="pt"
                      Margin="0,0,8,8" />
              <Button AutomationProperties.AutomationId="Settings_BtnLangPt" Classes="Outlined Small" Content="Portugu&#234;s"
                      IsVisible="{Binding !IsPortugueseSelected}"
                      Command="{Binding SelectLanguageCommand}" CommandParameter="pt"
                      Margin="0,0,8,8" />
            </Panel>
          </WrapPanel>
        </StackPanel>
      </Border>

      <!-- ==================== Legal Sources ==================== -->
      <Border Classes="SettingsCard" AutomationProperties.AutomationId="Settings_LegalSourcesCard">
        <StackPanel Spacing="12">
          <StackPanel Orientation="Horizontal" Spacing="8">
            <mi:MaterialIcon Kind="BookOpen" Width="20" Height="20"
                             Foreground="{DynamicResource PrimaryBrush}" />
            <TextBlock Text="{loc:Translate LegalSources}"
                       FontSize="16" FontWeight="Bold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center" />
          </StackPanel>

          <TextBlock Text="{loc:Translate LegalSourcesDescription}"
                     FontSize="12"
                     Foreground="{DynamicResource TextSecondaryBrush}" />

          <Button AutomationProperties.AutomationId="Settings_BtnArbZG"
                  Content="{loc:Translate LegalSourceArbZG}"
                  Classes="Secondary"
                  Command="{Binding OpenArbZGCommand}"
                  FontSize="13"
                  HorizontalAlignment="Stretch"
                  HorizontalContentAlignment="Center" />

          <Button AutomationProperties.AutomationId="Settings_BtnHolidaysSource"
                  Content="{loc:Translate LegalSourceHolidays}"
                  Classes="Secondary"
                  Command="{Binding OpenHolidaysSourceCommand}"
                  FontSize="13"
                  HorizontalAlignment="Stretch"
                  HorizontalContentAlignment="Center" />
        </StackPanel>
      </Border>

      <!-- App Version -->
      <TextBlock AutomationProperties.AutomationId="Settings_TxtAppVersion"
                 Text="{Binding AppVersion}"
                 FontSize="12"
                 Foreground="{DynamicResource TextSecondaryBrush}"
                 HorizontalAlignment="Center"
                 Margin="0,8" />

      <!-- Bottom Spacer (Ad-Banner) -->
      <Border Height="60" />

    </StackPanel>
  </ScrollViewer>

</UserControl>
