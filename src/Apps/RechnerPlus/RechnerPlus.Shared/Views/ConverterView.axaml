<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:RechnerPlus.ViewModels"
             xmlns:mi="using:Material.Icons.Avalonia"
             x:Class="RechnerPlus.Views.ConverterView"
             x:DataType="vm:ConverterViewModel">

  <ScrollViewer>
    <StackPanel Margin="16" Spacing="16">

      <!-- Header -->
      <TextBlock Text="{Binding TitleText}"
                 Classes="HeadlineMedium" />

      <!-- Category Selection -->
      <Border Classes="Card">
        <StackPanel Spacing="12">
          <StackPanel Orientation="Horizontal" Spacing="12">
            <mi:MaterialIcon Kind="Shape"
                             Width="24" Height="24"
                             Foreground="{DynamicResource PrimaryBrush}" />
            <TextBlock Text="{Binding CategoryText}"
                       Classes="TitleMedium"
                       VerticalAlignment="Center" />
          </StackPanel>
          <ComboBox ItemsSource="{Binding Categories}"
                    SelectedItem="{Binding SelectedCategory}"
                    HorizontalAlignment="Stretch" />
        </StackPanel>
      </Border>

      <!-- From Section -->
      <Border Classes="Card">
        <StackPanel Spacing="12">
          <TextBlock Text="{Binding FromText}"
                     Classes="LabelLarge" />
          <ComboBox ItemsSource="{Binding AvailableUnits}"
                    SelectedItem="{Binding FromUnit}"
                    HorizontalAlignment="Stretch" />
          <TextBox Text="{Binding InputValue}"
                   Watermark="{Binding EnterValueText}"
                   FontSize="18"
                   HorizontalAlignment="Stretch" />
        </StackPanel>
      </Border>

      <!-- Swap Button (mit Rotations-Animation) -->
      <Button Classes="FAB Mini"
              x:Name="SwapButton"
              HorizontalAlignment="Center"
              Command="{Binding SwapUnitsCommand}"
              ToolTip.Tip="{Binding SwapUnitsText}"
              RenderTransformOrigin="0.5,0.5">
        <Button.RenderTransform>
          <RotateTransform Angle="0"/>
        </Button.RenderTransform>
        <Button.Transitions>
          <Transitions>
            <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.3" Easing="CubicEaseOut"/>
          </Transitions>
        </Button.Transitions>
        <mi:MaterialIcon Kind="SwapVertical" Width="20" Height="20" />
      </Button>

      <!-- To Section -->
      <Border Classes="Card">
        <StackPanel Spacing="12">
          <TextBlock Text="{Binding ToText}"
                     Classes="LabelLarge" />
          <ComboBox ItemsSource="{Binding AvailableUnits}"
                    SelectedItem="{Binding ToUnit}"
                    HorizontalAlignment="Stretch" />

          <!-- Result Display mit Copy-Button -->
          <Grid ColumnDefinitions="*,Auto" Margin="0,8,0,4">
            <TextBlock Grid.Column="0"
                       x:Name="ResultText"
                       Text="{Binding OutputValue}"
                       FontSize="32"
                       FontWeight="Bold"
                       Foreground="{DynamicResource PrimaryBrush}"
                       HorizontalAlignment="Center"
                       TextTrimming="CharacterEllipsis">
              <TextBlock.Transitions>
                <Transitions>
                  <DoubleTransition Property="Opacity" Duration="0:0:0.2"/>
                </Transitions>
              </TextBlock.Transitions>
            </TextBlock>
            <Button Grid.Column="1"
                    Classes="Text"
                    Padding="8,4"
                    MinWidth="0"
                    MinHeight="0"
                    VerticalAlignment="Center"
                    Command="{Binding CopyResultCommand}"
                    ToolTip.Tip="Copy">
              <mi:MaterialIcon Kind="ContentCopy" Width="18" Height="18"
                               Foreground="{DynamicResource TextMutedBrush}"
                               Opacity="0.6"/>
            </Button>
          </Grid>
        </StackPanel>
      </Border>

      <!-- Bottom spacer for scroll comfort -->
      <Border Height="32" />

    </StackPanel>
  </ScrollViewer>

</UserControl>
